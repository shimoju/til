# 第3回ペパボテックカンファレンス

## 10年動き続けているブログサービスのエンドツーエンドを書いた記録

Nyah:ペパボのプライベートクラウド
JUGEM：JGセットWeb・DB39セットをPクラウドに→えっ

自動テストでカバーできていない→E2Eテストだ
目視確認350項目→自動テストにする

Turnip、Capybara＋PhantomJS

自然言語でテストを書く価値：概念の明確化と共有
デバッグ用（ユーティリティ）のstepをつくっておく

○○の中にある○○：cssでいうと全部id使うんじゃなくて子セレクタ

WYSIWYGエディタ：JS差し込み（入力）、ラグがあるのでリトライ可能に（出力）

stepを上手く作れると新しいstepを作らずにfeature（シナリオ）を量産できる

まだケース1/3未満、1人→チームに、が課題

### 質問

できることとできないことを区分けする→例えばFlashのテストができない
日本語でテストを書くことの価値：語彙をつくる→テストをつくる


## MogileFSをバックエンドとしたPrivate S3の作り方

30days

なぜプライベートS3か
各サービスそれぞれで構築→非効率
横断的に使えるオブジェクトストレージほしい

OpenStack Swiftは？→安定運用きつい
S3は？→従量課金コスト

なまえ：Bayt
割と簡単……？
MHA：MySQLクラスタの監視ミドルウェア　自動フェイルオーバーなど

mogilefsdがスケールしない問題：気合を入れる（優先度最高）
子もnice-20→全員やる気が出過ぎて落ちる

gatewayのやること
リクエスト受ける→APIは実体のURL（内部）を2つ返す→さらにproxy：アクセス→どっちかが取れればおｋ

ngx_mrubyすばら
今後：マルチロケーション化：動的リサイズ

### API編
REST API：Rails実装
既存のAPI借用：S3（「S3」は作らない）
サービスの特殊な事情には対応できない　が、サービス設計が健康的になる利点も
APIの拡張は難しい
さくらのストレージのドキュメントも参照

mogilefs-client Ruby製 Unicornの作者製
フレームワークはRails

S3をリファレンス実装：バグレポートが楽
実装していないAPIも501 Not Implementedを返すの重要

S3にはディレクトリはない：CommonPrefixes
これも実装
生Rails→rails-api使用

課題：GET遅い問題
バックエンドの知識

## LT by uzulla H2OとPHP

フルSSLでHTTP/2おしゃれな感じとか
でゅーん

## 歴史あるwebサービスに携わって２年半の間に起きた事やった事

入社から今日まで

テストなし、Trac、git-svn、PHP5.3、一部4→GHE導入
php-cs-fixer等を使った形式的な修正→コードの修正
差分が少なくなりレビューしやすく

E2Eテスト導入：RSpec+Capybara
ユニットはPHPUnit
E2Eの正常系だけでも全然楽になる

composer導入2段階
vendorをgit追加→デプロイ時にcomposer installする方向

cromはwhenever gem使用

Eloquent ORM：ららべるについてくるORM

テストそのものというよりテストできる環境：インフラのコード管理、スキーマ管理
ツールの導入だけではない意識は？→切磋琢磨：Ruby関連エンジニアの力強さに触発


## 尋常じゃない速度でドッグフードを食べる方法

Sqaleのドッグフーディング　まめぶろ

自己サービスをパイロットプロジェクトとして使う
新規サービスのインフラとして利用：kiteco→wimax
カラメルもSqale：PHPコンテナでWordPress

## 今夜、インターネットの片隅で。 〜ウェブサービス開発ちょっといい話〜

最高のカートとは？
フォームは全部必要なもの　だけど、全員に必要なものではない
例えば送付先と請求先、DL購入は住所いれなくていいはず
その人・状況に最適な画面を出す！→イメージ動画作成
プロトタイピングツールも使えればよい：みんなで作っていく

詩：哲学駆動開発
プロトタイプの一環

CSSの肥大化
CSSフレームワークとガイドラインを自作

リリースまでの必要機能の切り分け：主観でいいのか？
ユーザーテスト
操作動画とキャプチャ画面を同時に撮影→買えない……問題が発覚
→自信を持ってリリースできた
これじゃない感とは→何もしていない感
当然の話

## LT2　銅鑼パーソン

ポリティカル・コレクトネス問題も
PHP WebAudio

## OS X アプリケーション 開発普及活動

OSXアプリ　Cocoaプログラミングを知る
Cocoa Programming for OS X： Swiftで書き直された

Teiten

Yosemiteで機能追加、変更
Electron：動画処理どうしようかだけどできそう

## 仮想通貨自動トレード記 Part1 〜 国内Bitcoin取引所で裁定取引したら儲かるの？ 〜

bitcoinの自動売買したら儲かるか：hubot使用
トレーディングストラテジー

## LT3
